from flask import Flask, render_template
from models.config import department, testType1, testType2, testType3, testType4
from models.monthlyData import MonthlyCounter
from models.summaryData import SummaryData
from models.tests import TestsData
from models.tat import TATData
from models.weeklyData import WeeklyCounter

app = Flask(__name__)

def get_test_content(test_type, prefix):
    test_data_obj = TestsData(test_type)
    test_content = {
        f"registered{prefix}": test_data_obj.getRegistered(),
        f"received{prefix}": test_data_obj.getReceived(),
        f"inProgress{prefix}": test_data_obj.getInProgress(),
        f"pendingAuth{prefix}": test_data_obj.getPendingAuth(),
        f"complete{prefix}": test_data_obj.getComplete()
    }
    test_data_obj.closeConn()
    return test_content

@app.route("/dashboard/")
@app.route("/")
def index():
    content = {
        "departmentName": department,
        "testType1": testType1,
        "testType2": testType2,
        "testType3": testType3,
        "testType4": testType4,
    }
    
    summary_data_obj = SummaryData()
    summary_content = {
        "summaryRegisteredTotal": summary_data_obj.getSummaryRegistered(),
        "summaryReceivedTotal": summary_data_obj.getSummaryReceived(),
        "summaryInProgressTotal": summary_data_obj.getSummaryInprogress(),
        "summaryPendingAuthTotal": summary_data_obj.getSummaryPendingAuth(),
        "summaryCompleteTotal": summary_data_obj.getSummaryComplete()
    }
    summary_data_obj.closeConn()

    test_content1 = get_test_content(testType1, '1')
    test_content2 = get_test_content(testType2, '2')
    test_content3 = get_test_content(testType3, '3')
    test_content4 = get_test_content(testType4, '4')

    tat_content = {
        "target1": TATData(testType1).targetTAT(),
        "target2": TATData(testType2).targetTAT(),
        "target3": TATData(testType3).targetTAT(),
        "target4": TATData(testType4).targetTAT()
    }

    counter = WeeklyCounter()
    weekly_content = {
        "weeklyRegistered": counter.getSummaryRegistered(),
        "weeklyRecieved": counter.getSummaryReceived(),
        "weeklyProgress": counter.getSummaryInprogress(),
        "weeklyPending": counter.getSummaryPendingAuth(),
        "weeklyComplete": counter.getSummaryComplete()
    }
    counter.closeConn()

    counter_monthly = MonthlyCounter()
    monthly_content = {
        "monthlyRegistered": counter_monthly.getSummaryRegistered(),
        "monthlyRecieved": counter_monthly.getSummaryReceived(),
        "monthlyProgress": counter_monthly.getSummaryInprogress(),
        "monthlyPending": counter_monthly.getSummaryPendingAuth(),
        "monthlyComplete": counter_monthly.getSummaryComplete()
    }
    counter_monthly.closeConn()

    return render_template(
        "dashboard.template.html",
        **content,
        **summary_content,
        **test_content1,
        **test_content2,
        **test_content3,
        **test_content4,
        **tat_content,
        **weekly_content,
        **monthly_content
    )

if __name__ == "__main__":
    app.run(debug=True)






<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{departmentName}}</title>
    <link rel="stylesheet" href="{{url_for('static',filename='css/dashBoard.css')}}">
    <link rel="stylesheet" href="../static/css/dashBoard.css">
</head>
<body>
    <div class="nav">
        {{departmentName}}
    </div>
    <div class="sideNav">
        <!-- <span>
            SUMMERY
        </span> -->
        <div class="card">
            <span class="title green">
                REGISTERED
            </span>
            <span class="value">
                {{summaryRegisteredTotal}}
            </span>
        </div>
        <div class="card">
            <span class="title maroon">
                RECIEVED
            </span>
            <span class="value">
                {{summaryReceivedTotal}}
            </span>
        </div>
        <div class="card">
            <span class="title red">
                IN PROGRESS
            </span>
            <span class="value">
                {{summaryInProgressTotal}}
            </span>
        </div>
        <div class="card">
            <span class="title lightBlue">
                PENDING AUTHORIZATION
            </span>
            <span class="value">
                {{summaryPendingAuthTotal}}
            </span>
        </div>
        <div class="card">
            <span class="title green">
                COMPLETED
            </span>
            <span class="value">
                {{summaryCompleteTotal}}
            </span>
        </div>
    </div>


    <!-- ############################################## -->
    
    
    <div class="main">
        <div class="test">
            <span class ="header .green">
                {{testType1}}
            </span>
            <div class="statusCards">
                <div class="cardWrapper">
                    <div class="cardTitle green">
                        Received
                    </div>
                    <div class="cardValue">
                        {{received1}}
                    </div>
                </div>
                <div class="cardWrapper">
                    <div class="cardTitle red">
                        In Progress
                    </div>
                    <div class="cardValue">
                        {{inProgress1}}
                    </div>
                </div>
                <div class="cardWrapper">
                    <div class="cardTitle red">
                        Pending Authorization
                    </div>
                    <div class="cardValue">
                        {{pendingAuth1}}
                    </div>
                </div>
                <div class="cardWrapper">
                    <div class="cardTitle green">
                        Completed
                    </div>
                    <div class="cardValue">
                        {{complete1}}
                    </div>
                </div>       
            </div>
            <div class="tat">
                <span class="tatHeader">
                    TAT
                </span>
                <div class="statusCards">
                    <div class="cardWrapper">
                        <div class="cardTitle">
                            TARGET
                        </div>
                        <div class="cardValue">
                            {{target1}}
                        </div>
                    </div>
                    <div class="cardWrapper">
                        <div class="cardTitle">
                            CURRENT
                        </div>
                        <div class="cardValue">
                            7
                        </div>
                    </div>
                    <div class="cardWrapper">
                        <div class="cardTitle">
                            AVERAGE
                        </div>
                        <div class="cardValue">
                            0
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <div class="test">
            <span class ="header .green">
                {{testType2}}
            </span>
            <div class="statusCards">
                <div class="cardWrapper">
                    <div class="cardTitle green">
                        Received
                    </div>
                    <div class="cardValue">
                        {{received2}}
                    </div>
                </div>
                <div class="cardWrapper">
                    <div class="cardTitle red">
                        In Progress
                    </div>
                    <div class="cardValue">
                        {{inProgress2}}
                    </div>
                </div>
                <div class="cardWrapper">
                    <div class="cardTitle red">
                        Pending Authorization
                    </div>
                    <div class="cardValue">
                        {{pendingAuth2}}
                    </div>
                </div>
                <div class="cardWrapper">
                    <div class="cardTitle green">
                        Completed
                    </div>
                    <div class="cardValue">
                        {{complete2}}
                    </div>
                </div>
                
            </div>
            <div class="tat">
                <span class="tatHeader">
                    TAT
                </span>
                <div class="statusCards">
                    <div class="cardWrapper">
                        <div class="cardTitle">
                            TARGET
                        </div>
                        <div class="cardValue">
                            {{target2}}
                        </div>
                    </div>
                    <div class="cardWrapper">
                        <div class="cardTitle">
                            CURRENT
                        </div>
                        <div class="cardValue">
                            7
                        </div>
                    </div>
                    <div class="cardWrapper">
                        <div class="cardTitle">
                            AVERAGE
                        </div>
                        <div class="cardValue">
                            0
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <div class="test">
            <span class ="header .green">
                {{testType3}}
            </span>
            <div class="statusCards">
                <div class="cardWrapper">
                    <div class="cardTitle green">
                        Received
                    </div>
                    <div class="cardValue">
                        {{received3}}
                    </div>
                </div>
                <div class="cardWrapper">
                    <div class="cardTitle red">
                        In Progress
                    </div>
                    <div class="cardValue">
                        {{inProgress3}}
                    </div>
                </div>
                <div class="cardWrapper">
                    <div class="cardTitle red">
                        Pending Authorization
                    </div>
                    <div class="cardValue">
                        {{pendingAuth3}}
                    </div>
                </div>
                <div class="cardWrapper">
                    <div class="cardTitle green">
                        Completed
                    </div>
                    <div class="cardValue">
                        {{complete3}}
                    </div>
                </div>
                
            </div>
            <div class="tat">
                <span class="tatHeader">
                    TAT
                </span>
                <div class="statusCards">
                    <div class="cardWrapper">
                        <div class="cardTitle">
                            TARGET
                        </div>
                        <div class="cardValue">
                            {{target3}}
                        </div>
                    </div>
                    <div class="cardWrapper">
                        <div class="cardTitle">
                            CURRENT
                        </div>
                        <div class="cardValue">
                            7
                        </div>
                    </div>
                    <div class="cardWrapper">
                        <div class="cardTitle">
                            AVERAGE
                        </div>
                        <div class="cardValue">
                            0
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="test">
            <span class ="header .green">
                {{testType4}}
            </span>
            <div class="statusCards">
                <div class="cardWrapper">
                    <div class="cardTitle green">
                        Received
                    </div>
                    <div class="cardValue">
                        {{received4}}
                    </div>
                </div>
                <div class="cardWrapper">
                    <div class="cardTitle red">
                        In Progress
                    </div>
                    <div class="cardValue">
                        {{inProgress4}}
                    </div>
                </div>
                <div class="cardWrapper">
                    <div class="cardTitle red">
                        Pending Authorization
                    </div>
                    <div class="cardValue">
                        {{pendingAuth4}}
                    </div>
                </div>
                <div class="cardWrapper">
                    <div class="cardTitle green">
                        Completed
                    </div>
                    <div class="cardValue">
                        {{complete4}}
                    </div>
                </div>
                
            </div>
            <div class="tat">
                <span class="tatHeader">
                    TAT
                </span>
                <div class="statusCards">
                    <div class="cardWrapper">
                        <div class="cardTitle">
                            TARGET
                        </div>
                        <div class="cardValue">
                            {{target4}}
                        </div>
                    </div>
                    <div class="cardWrapper">
                        <div class="cardTitle">
                            CURRENT
                        </div>
                        <div class="cardValue">
                            7
                        </div>
                    </div>
                    <div class="cardWrapper">
                        <div class="cardTitle">
                            AVERAGE
                        </div>
                        <div class="cardValue">
                            0
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="bottomBanner">
        <div class="title">
            <span class="category">
                WEEKLY & MONTHLY SUMMARY
            </span>
        </div>
    </div>

#1
    <div class="slideShowContainer" id="slide1">
       
       
        <div class="slideShow">
            <div class="category">
                Monthly
            </div>

            <div class="categoryContainer">
                <div class="categoryResults">
                    <div class="title">
                        Registered
                    </div>
                    <div class="value">
                        {{monthlyRegistered}}
                    </div>
                </div>
                
                <div class="categoryResults">
                    <div class="title">
                    Received
                    </div>
                    <div class="value">
                        {{monthlyRecieved}}
                    </div>
                </div>
                
            </div>
        </div>

       

        <div class="slideShow">
            <div class="category">
                WEEKLY
            </div>

            <div class="categoryContainer">
                <div class="categoryResults">
                    <div class="title">
                        Registered
                    </div>
                    <div class="value">
                        {{weeklyRegistered}}
                    </div>
                </div>
                
                <div class="categoryResults">
                    <div class="title">
                        Received
                    </div>
                    <div class="value">
                        {{weeklyRecieved}}
                    </div>
                </div>
                
            </div>
        </div>

       


    </div> 
    


#2
    <div class="slideShowContainer" id="slide2">
       
       
        <div class="slideShow">
            <div class="category">
                Monthly
            </div>

            <div class="categoryContainer">
                <div class="categoryResults">
                    <div class="title">
                        In Progress
                    </div>
                    <div class="value">
                        {{monthlyProgress}}
                    </div>
                </div>
                
            </div>
        </div>
       

        <div class="slideShow">
            <div class="category">
                WEEKLY
            </div>

            <div class="categoryContainer">
                
                <div class="categoryResults">
                    <div class="title">
                    In Progress
                    </div>
                    <div class="value">
                        {{weeklyProgress}}
                    </div>
                </div>  
            </div>
        </div>
    </div>


#3
    <div class="slideShowContainer" id="slide4">
       
       
        <div class="slideShow">
            <div class="category">
                Monthly
            </div>

            <div class="categoryContainer">
                <div class="categoryResults">
                    <div class="title">
                        Completed
                    </div>
                    <div class="value">
                        {{monthlyComplete}}
                    </div>
                </div>
                
            </div>
        </div>
       

        <div class="slideShow">
            <div class="category">
                WEEKLY
            </div>

            <div class="categoryContainer">
                
                <div class="categoryResults">
                    <div class="title">
                        Completed
                    </div>
                    <div class="value">
                        {{weeklyComplete}}
                    </div>
                </div>  
            </div>
        </div>
    </div>



#3
    <div class="slideShowContainer" id="slide3">
       
       
        <div class="slideShow">
            <div class="category">
                Monthly
            </div>

            <div class="categoryContainer">
                <div class="categoryResults">
                    <div class="title">
                        Pending Authorization
                    </div>
                    <div class="value">
                        {{monthlyPending}}
                    </div>
                </div>
                
            </div>
        </div>
       

        <div class="slideShow">
            <div class="category">
                WEEKLY
            </div>

            <div class="categoryContainer">
                
                <div class="categoryResults">
                    <div class="title">
                    Pending Authorization
                    </div>
                    <div class="value">
                        {{weeklyPending}}
                    </div>
                </div>  
            </div>
        </div>
    </div>
    <script src="{{url_for('static',filename='js/dashBoard.js')}}"></script>
    <script src="../static/js/dashBoard.js"></script>
</body>
</html>






{% extends "dashboard.base.html" %}

<!--content-->
{% block departmentName %}
    {{departmentName}}
{% endblock %}
{% block testType1 %}
    {{testType1}}
{% endblock %}
{% block testType2 %}
    {{testType2}}
{% endblock %}
{% block testType3 %}
    {{testType3}}
{% endblock %}
{% block testType4 %}
    {{testType4}}
{% endblock %}

<!--Summary-->
{% block summaryRegisteredTotal %}
    {{summaryRegisteredTotal}}
{% endblock %}
{% block summaryReceivedTotal %}
    {{summaryReceivedTotal}}
{% endblock %}
{% block summaryInProgressTotal %}
    {{summaryInProgressTotal}}
{% endblock %}
{% block summaryPendingAuthTotal %}
    {{summaryPendingAuthTotal}}
{% endblock %}
{% block summaryCompleteTotal %}
    {{summaryCompleteTotal}}
{% endblock %}


<!--Test1-->
{% block registered1 %}
    {{registered1}}
{% endblock %}
{% block received1 %}
    {{received1}}
{% endblock %}
{% block inProgress1 %}
    {{inProgress1}}
{% endblock %}
{% block pendingAuth1 %}
    {{pendingAuth1}}
{% endblock %}
{% block complete1 %}
    {{complete1}}
{% endblock %}



<!--Test2-->
{% block registered2 %}
    {{registered2}}
{% endblock %}
{% block received2 %}
    {{received2}}
{% endblock %}
{% block inProgress2 %}
    {{inProgress2}}
{% endblock %}
{% block pendAuth2 %}
    {{pendAuth2}}
{% endblock %}
{% block complete2 %}
    {{complete2}}
{% endblock %}


<!--Test3-->
{% block registered3 %}
    {{registered3}}
{% endblock %}
{% block received3 %}
    {{received3}}
{% endblock %}
{% block inProgress3 %}
    {{inProgress3}}
{% endblock %}
{% block pendAuth3 %}
    {{pendAuth3}}
{% endblock %}
{% block complete3 %}
    {{complete3}}
{% endblock %}


<!--Test4-->
{% block registered4 %}
    {{registered4}}
{% endblock %}
{% block received4 %}
    {{received4}}
{% endblock %}
{% block inProgress4 %}
    {{inProgress4}}
{% endblock %}
{% block pendAuth4 %}
    {{pendAuth4}}
{% endblock %}
{% block complete4 %}
    {{complete4}}
{% endblock %}



<!--TAT-->
{% block target1 %}
    {{target1}}
{% endblock %}
{% block target2 %}
    {{target2}}
{% endblock %}
{% block target3 %}
    {{target3}}
{% endblock %}
{% block target4 %}
    {{target4}}
{% endblock %}


<!--Weekly Summary-->
{% block weeklyRegistered %}
    {{weeklyRegistered}}
{% endblock %}
{% block weeklyRecieved %}
    {{weeklyRecieved}}
{% endblock %}
{% block weeklyProgress %}
    {{weeklyProgress}}
{% endblock %}
{% block weeklyPending %}
    {{weeklyPending}}
{% endblock %}
{% block weeklyComplete %}
    {{weeklyComplete}}
{% endblock %}

<!--Monthly Summary-->
{% block monthlyRegistered %}
    {{monthlyRegistered}}
{% endblock %}
{% block monthlyRecieved %}
    {{monthlyRecieved}}
{% endblock %}
{% block monthlyProgress %}
    {{monthlyProgress}}
{% endblock %}
{% block monthlyPending %}
    {{monthlyPending}}
{% endblock %}
{% block monthlyComplete %}
    {{monthlyComplete}}
{% endblock %}